class BJsonLoader extends HTMLElement{constructor(){super();this._data={};this._loading=false;this._error=null;}
async loadJson(url,key='data'){try{this._loading=true;this._error=null;const response=await fetch(url);if(!response.ok){throw new Error(`Failed to load ${url}: ${response.status} ${response.statusText}`);}
const data=await response.json();this._data[key]=data;this._loading=false;return data;}catch(error){this._loading=false;this._error=error;console.error(`Error loading ${url}:`,error);throw error;}}
async loadMultipleJson(files){try{this._loading=true;this._error=null;const entries=Object.entries(files);const fetchPromises=entries.map(([key,url])=>fetch(url).then(response=>{if(!response.ok){throw new Error(`Failed to load ${url}: ${response.status} ${response.statusText}`);}
return response.json();}).then(data=>({key,data})));const results=await Promise.all(fetchPromises);results.forEach(({key,data})=>{this._data[key]=data;});this._loading=false;const result={};results.forEach(({key,data})=>{result[key]=data;});return result;}catch(error){this._loading=false;this._error=error;console.error('Error loading JSON files:',error);throw error;}}
getData(key){return this._data[key];}
isLoading(){return this._loading;}
getError(){return this._error;}
showLoading(message='Loading...'){this.innerHTML=`<p>${this.escapeHtml(message)}</p>`;}
showError(message='Error loading data.'){this.innerHTML=`<p>${this.escapeHtml(message)}</p>`;}
escapeHtml(text){if(!text)return'';const div=document.createElement('div');div.textContent=text;return div.innerHTML;}
slugify(text){if(!text)return'';return text.toLowerCase().replace(/\//g,'-slash-').replace(/\s+/g,'-');}
loadComponents(){if(window.ComponentLoader){window.ComponentLoader.find(this).forEach(comp=>{window.ComponentLoader.load(comp).catch(()=>{});});}}}
window.BJsonLoader=BJsonLoader;